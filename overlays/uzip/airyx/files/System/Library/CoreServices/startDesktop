#!/bin/sh

# Prevent Gnome-related processes at-spi-bus-launcher
# and at-spi2-registryd from bleeding into our system
# https://bbs.archlinux.org/viewtopic.php?pid=1789644#p1789644
export NO_AT_BRIDGE=1

##################
# Global menus for Gtk applications
# 
# https://github.com/rilian-la-te/vala-panel-appmenu/blob/master/subprojects/appmenu-gtk-module/README.md
##################

if [ -n "$GTK_MODULES" ]; then
    GTK_MODULES="${GTK_MODULES}:appmenu-gtk-module"
else
    GTK_MODULES="appmenu-gtk-module"
fi

if [ -z "$UBUNTU_MENUPROXY" ]; then
    UBUNTU_MENUPROXY=1
fi

export GTK_MODULES
export UBUNTU_MENUPROXY

# Export other environment variables
export QT_QPA_PLATFORMTHEME=kde

# Export XDG environment variables,
export XDG_CACHE_HOME=~/.cache
export XDG_CONFIG_DIRS=/etc:/etc/xdg:/usr/local/etc/xdg:/usr/share:/usr/local/share
export XDG_CONFIG_HOME=~/Library/FreeDesktop/config
export XDG_DATA_DIRS=~/Library/FreeDesktop/share:~/.local/share:/usr/local/share:/usr/share
export XDG_DATA_HOME=~/Library/FreeDesktop/share
export XDG_SESSION_CLASS=user
export XDG_SESSION_TYPE=kde

/System/Library/CoreServices/Filer.app/Contents/Airyx/Filer --desktop &
/usr/bin/startplasma-x11

